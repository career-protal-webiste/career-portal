name: Run Cron Ingestors

on:
  schedule:
    - cron: "*/15 * * * *"   # every 15 minutes
  workflow_dispatch:          # allow manual runs

jobs:
  run-crons:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    env:
      BASE_URL: https://<YOUR-PROD-DOMAIN>   # e.g. https://career-portal-nine.vercel.app
    steps:
      - name: ASHBY
        run: |
          curl -fsSL -H "x-cron-key: ${{ secrets.CRON_SECRET }}" \
            "$BASE_URL/api/cron/ashby?all=1&debug=1"
      - name: WORKABLE
        run: |
          curl -fsSL -H "x-cron-key: ${{ secrets.CRON_SECRET }}" \
            "$BASE_URL/api/cron/workable?all=1&debug=1"
      - name: RECRUITEE
        run: |
          curl -fsSL -H "x-cron-key: ${{ secrets.CRON_SECRET }}" \
            "$BASE_URL/api/cron/recruitee?all=1&debug=1"
      - name: LEVER
        run: |
          curl -fsSL -H "x-cron-key: ${{ secrets.CRON_SECRET }}" \
            "$BASE_URL/api/cron/lever?debug=1"
      - name: GREENHOUSE
        run: |
          curl -fsSL -H "x-cron-key: ${{ secrets.CRON_SECRET }}" \
            "$BASE_URL/api/cron/greenhouse?debug=1"
